<!doctype html>
<html lang="en">
<!-- ... Keep the head part the same as index.html ... -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Music Resource Management</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="assets/media/image/favicon.png"/>

    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- Plugin styles -->
    <link rel="stylesheet" href="vendors/bundle.css" type="text/css">

    <!-- Slick -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css">

    <!-- Daterangepicker -->
    <link rel="stylesheet" href="vendors/datepicker/daterangepicker.css" type="text/css">

    <!-- DataTable -->
    <link rel="stylesheet" href="vendors/dataTable/datatables.min.css" type="text/css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- App styles -->
    <link rel="stylesheet" href="assets/css/app.css" type="text/css">
    
    <!-- Added Player Styles -->
    <style>
        .audio-player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1rem;
            background: #fff;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.05);
            z-index: 1000;
        }
        
        /* Player styles */
        .player-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .song-info {
            display: flex;
            align-items: center;
            width: 30%;
        }
        
        .cover {
            width: 50px;
            height: 50px;
            margin-right: 1rem;
            overflow: hidden;
            border-radius: 4px;
        }
        
        .cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .details h5 {
            margin: 0;
            font-size: 1rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
        }
        
        .details p {
            margin: 0;
            font-size: 0.8rem;
            color: #6c757d;
        }
        
        .controls {
            width: 40%;
        }
        
        .player-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .control-button {
            background: none;
            border: none;
            color: #495057;
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        
        .control-button:hover {
            background-color: #f8f9fa;
            color: #007bff;
        }
        
        .progress-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .progress {
            flex-grow: 1;
            height: 4px;
            background-color: #e9ecef;
        }
        
        .progress-bar {
            background-color: #007bff;
        }
        
        #currentTime, #duration {
            font-size: 0.7rem;
            color: #6c757d;
            width: 35px;
            text-align: center;
        }
        
        .volume {
            display: flex;
            align-items: center;
            width: 20%;
            justify-content: flex-end;
            gap: 0.5rem;
        }
        
        .volume-slider {
            width: 80px;
        }
        
        input[type=\"range\"] {
            -webkit-appearance: none;
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
        }
        
        input[type=\"range\"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 12px;
            background: #007bff;
            border-radius: 50%;
            cursor: pointer;
        }
    </style>

    <!-- Add Axios CDN, ensure early page loading -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <!-- begin::preloader-->
    <div class="preloader">
        <div class="preloader-icon"></div>
    </div>
    <!-- end::preloader -->

    <!-- begin::header -->
    <div class="header">
        <div class="header-left">
            <div class="navigation-toggler">
                <a href="#" data-action="navigation-toggler">
                    <i data-feather="menu"></i>
                </a>
            </div>
            <div class="header-logo">
                <a href="index.html">
                    <img class="logo" src="assets/media/image/music-logo.png" alt="Music Resource Management">
                    <img class="logo-light" src="assets/media/image/music-logo-light.png" alt="Music Resource Management">
                </a>
            </div>
        </div>
        <!-- ... Remaining header content ... -->
    </div>
    <!-- end::header -->

    <!-- begin::main -->
    <div id="main">
        <!-- BEGIN REPLACEMENT: Navigation -->
        <div class="navigation">
            <div class="navigation-menu-tab">
                <div class="flex-grow-1">
                    <ul>
                        <!-- Dashboard Icon Link -->
                        <li><a href="#" data-toggle="tooltip" data-placement="right" title="Dashboard" data-nav-target="#dashboards"><i data-feather="home"></i></a></li>
                        <!-- My Music Icon Link (ACTIVE) -->
                        <li><a class="active" href="#" data-toggle="tooltip" data-placement="right" title="My Music" data-nav-target="#my-music"><i data-feather="music"></i></a></li> 
                        <!-- Categories Icon Link -->
                        <li><a href="#" data-toggle="tooltip" data-placement="right" title="Categories" data-nav-target="#categories"><i data-feather="folder"></i></a></li>
                        <!-- Artists Icon Link -->
                        <li><a href="#" data-toggle="tooltip" data-placement="right" title="Artists" data-nav-target="#artists"><i data-feather="users"></i></a></li>
                        <!-- Upload Music Icon Link -->
                        <li><a href="#" data-toggle="tooltip" data-placement="right" title="Upload Music" data-nav-target="#upload"><i data-feather="upload"></i></a></li>
                        <!-- Tags Icon Link -->
                        <li><a href="#" data-toggle="tooltip" data-placement="right" title="Tags" data-nav-target="#tags"><i data-feather="tag"></i></a></li>
                        <!-- Settings Icon Link -->
                        <li><a href="#" data-toggle="tooltip" data-placement="right" title="Settings" data-nav-target="#settings"><i data-feather="settings"></i></a></li>
                    </ul>
                </div>
                <div><ul><li><a href="../login.html" data-toggle="tooltip" data-placement="right" title="Logout"><i data-feather="log-out"></i></a></li></ul></div>
            </div>

            <!-- Standard Secondary Navigation Panel -->
            <div class="navigation-menu-body">
                <div class="navigation-menu-group">
                    <!-- Dashboard Section -->
                     <div id="dashboards">
                        <ul>
                            <li class="navigation-divider">Dashboard</li>
                            <li><a href="index.html">Overview</a></li>
                             <li><a href="top-songs.html">Top Songs</a></li>
                             <li><a href="artists.html">All Artists</a></li>
                        </ul>
                    </div>
                    <!-- My Music Section (ACTIVE and OPEN) -->
                    <div id="my-music" class="open">
                        <ul>
                            <li class="navigation-divider">My Music</li>
                            <li><a class="active" href="my-music.html">All Songs</a></li>
                             <li><a href="top-songs.html">Top Songs</a></li>
                        </ul>
                    </div>
                    <!-- Categories Section -->
                    <div id="categories">
                        <ul>
                            <li class="navigation-divider">Categories</li>
                            <li><a href="categories.html">Manage Categories</a></li>
                        </ul>
                    </div>
                     <!-- Artists Section -->
                     <div id="artists">
                        <ul>
                            <li class="navigation-divider">Artists</li>
                            <li><a href="artists.html">All Artists</a></li>
                        </ul>
                    </div>
                    <!-- Upload Section -->
                    <div id="upload">
                        <ul>
                            <li class="navigation-divider">Upload</li>
                            <li><a href="upload-music.html">Upload Music</a></li>
                        </ul>
                    </div>
                    <!-- Tags Section -->
                    <div id="tags">
                        <ul>
                            <li class="navigation-divider">Tags</li>
                            <li><a href="tag-management.html">Manage Tags</a></li>
                             <li><a href="tag-songs.html">View Songs by Tag</a></li> 
                        </ul>
                    </div>
                    <!-- Settings Section -->
                    <div id="settings">
                        <ul>
                            <li class="navigation-divider">Settings</li>
                            <li><a href="settings.html">Profile</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- END REPLACEMENT: Navigation -->

        <!-- begin::main-content -->
        <div class="main-content">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">My Music</li>
                </ol>
            </nav>

            <div class="row">
                <div class="col-md-12">
                    <!-- Statistics Cards -->
                    <div class="row mb-4">
                        <div class="col-lg-3 col-md-6">
                            <div class="card bg-primary-gradient border-0">
                                <div class="card-body text-center">
                                    <figure class="avatar mb-3 border-0">
                                        <span class="avatar-title bg-white text-primary rounded-circle">
                                            <i data-feather="music"></i>
                                        </span>
                                    </figure>
                                    <h2 class="font-weight-bold mb-3">157</h2>
                                    <h5 class="mb-0">My Songs</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="card bg-success-gradient border-0">
                                <div class="card-body text-center">
                                    <figure class="avatar mb-3 border-0">
                                        <span class="avatar-title bg-white text-success rounded-circle">
                                            <i data-feather="check-circle"></i>
                                        </span>
                                    </figure>
                                    <h2 class="font-weight-bold mb-3">142</h2>
                                    <h5 class="mb-0">Approved</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="card bg-warning-gradient border-0">
                                <div class="card-body text-center">
                                    <figure class="avatar mb-3 border-0">
                                        <span class="avatar-title bg-white text-warning rounded-circle">
                                            <i data-feather="clock"></i>
                                        </span>
                                    </figure>
                                    <h2 class="font-weight-bold mb-3">15</h2>
                                    <h5 class="mb-0">Pending</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <div class="card bg-info-gradient border-0">
                                <div class="card-body text-center">
                                    <figure class="avatar mb-3 border-0">
                                        <span class="avatar-title bg-white text-info rounded-circle">
                                            <i data-feather="play-circle"></i>
                                        </span>
                                    </figure>
                                    <h2 class="font-weight-bold mb-3">2.5k</h2>
                                    <h5 class="mb-0">Total Plays</h5>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Content Card -->
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h6 class="card-title">My Music Library</h6>
                                <div>
                                    <button class="btn btn-primary" data-toggle="modal" data-target="#uploadMusicModal">
                                        <i data-feather="upload" class="mr-2"></i> Upload New
                                    </button>
                                    <button class="btn btn-secondary ml-2">
                                        <i data-feather="filter" class="mr-2"></i> Filter
                                    </button>
                                </div>
                            </div>

                            <!-- Music Filter Section -->
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <select class="form-control">
                                        <option>All Categories</option>
                                        <option>Pop</option>
                                        <option>Rock</option>
                                        <option>Jazz</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <select class="form-control">
                                        <option>Status</option>
                                        <option>Approved</option>
                                        <option>Pending</option>
                                        <option>Rejected</option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Search music...">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="button">
                                                <i data-feather="search"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Music List Table -->
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="custom-control custom-checkbox">
                                                    <input type="checkbox" class="custom-control-input" id="selectAll">
                                                    <label class="custom-control-label" for="selectAll"></label>
                                                </div>
                                            </th>
                                            <th>Song Name</th>
                                            <th>Category</th>
                                            <th>Tags</th>
                                            <th>Upload Date</th>
                                            <th>Status</th>
                                            <th>Plays</th>
                                            <th class="text-right">Actions</th>
                                            <th>Edit</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="9" class="text-center">Loading songs...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Pagination -->
                            <nav class="mt-4">
                                <ul class="pagination justify-content-center">
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                                    </li>
                                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                                    <li class="page-item">
                                        <a class="page-link" href="#">Next</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end::main-content -->
    </div>
    <!-- end::main -->

    <!-- Edit Song Modal -->
    <div class="modal fade" id="editSongModal" tabindex="-1" aria-labelledby="editSongModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editSongModalLabel">Edit Song Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="editSongForm">
                        <input type="hidden" id="editSongId">

                        <!-- Basic Info -->
                        <div class="form-group">
                            <label for="editSongName">Song Name *</label>
                            <input type="text" class="form-control" id="editSongName" required>
                        </div>
                        <div class="form-group">
                            <label for="editSingerId">Singer ID *</label>
                            <input type="number" class="form-control" id="editSingerId" required>
                        </div>
                        <div class="form-group">
                            <label for="editIntroduction">Introduction</label>
                            <textarea class="form-control" id="editIntroduction" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="editLyric">Lyrics</label>
                            <textarea class="form-control" id="editLyric" rows="5"></textarea>
                        </div>

                        <hr>

                        <!-- Categories -->
                        <div class="form-group">
                            <label for="editCategoryPillsContainer">Categories *</label>
                            <div id="editCategoryPillsContainer" class="d-flex flex-wrap gap-2 mb-2 p-2 border rounded" style="min-height: 40px;">
                                <span class="text-muted">Loading categories...</span>
                            </div>
                            <small class="form-text text-muted">Select one or more categories.</small>
                        </div>

                        <hr>

                        <!-- Tags -->
                        <div class="form-group">
                            <label for="editTagPillsContainer">Tags</label>
                            <div id="editTagPillsContainer" class="d-flex flex-wrap gap-2 mb-2 p-2 border rounded" style="min-height: 40px;">
                                <span class="text-muted">Loading tags...</span>
                            </div>
                            <small class="form-text text-muted">Select zero or more tags.</small>
                        </div>

                        <!-- Message Area -->
                        <div id="editSongMessage" class="mt-3"></div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveSongChangesButton">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Music Modal -->
    <div class="modal fade" id="uploadMusicModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Upload New Music</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label>Music File</label>
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="musicFile">
                                <label class="custom-file-label" for="musicFile">Choose file</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Song Name</label>
                            <input type="text" class="form-control" placeholder="Enter song name">
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select class="form-control">
                                <option>Select category</option>
                                <option>Pop</option>
                                <option>Rock</option>
                                <option>Jazz</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea class="form-control" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Upload</button>
                </div>
            </div>
        </div>
    </div>

   

    <!-- Added Audio Player HTML -->
    <div class="audio-player">
        <div class="player-content">
            <div class="song-info">
                <div class="cover">
                    <img id="currentSongCover" src="assets/media/image/default-cover.jpg" alt="Cover">
                </div>
                <div class="details">
                    <h5 id="currentSongTitle">No song playing</h5>
                    <p id="currentSongArtist">-</p>
                </div>
            </div>
            
            <div class="controls">
                <div class="player-controls">
                    <button id="prevButton" class="control-button">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button id="playPauseButton" class="control-button">
                        <i class="fas fa-play"></i>
                    </button>
                    <button id="nextButton" class="control-button">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
                
                <div class="progress-container">
                    <span id="currentTime">0:00</span>
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                    </div>
                    <span id="duration">0:00</span>
                </div>
            </div>
            
            <div class="volume">
                <button id="muteButton" class="control-button">
                    <i class="fas fa-volume-up"></i>
                </button>
                <div class="volume-slider">
                    <input type="range" class="form-range" id="volumeSlider" min="0" max="100" value="100">
                </div>
            </div>
        </div>
        
        <audio id="audioPlayer"></audio>
    </div>
    <!-- End Added Audio Player HTML -->

    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Bootstrap CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin scripts -->
    <script src="vendors/bundle.js"></script>

    <!-- Slick -->
    <script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

    <!-- Chartjs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

    <!-- Apex chart -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <!-- Daterangepicker -->
    <script src="vendors/datepicker/daterangepicker.js"></script>

    <!-- DataTable -->
    <script src="vendors/dataTable/datatables.min.js"></script>

    <!-- Feather Icons CDN -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <!-- Dashboard scripts -->
    <script src="assets/js/examples/dashboard.js"></script>

    <!-- App scripts -->
    <script src="assets/js/app.js"></script>

    <!-- Common API Module -->
    <script type="module" src="../Common/js/api.js"></script> 
    
    <!-- My Music Scripts -->
    <script type="module" src="assets/js/my-music.js"></script>
    
    <script type="module" src="assets/js/auth-check.js"></script>
    <script type="module" src="assets/js/audio-player.js"></script>
</body>
</html>
